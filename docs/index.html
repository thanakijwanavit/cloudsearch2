---

title: Project name here


keywords: fastai
sidebar: home_sidebar

summary: "Summary description here."
description: "Summary description here."
nb_path: "index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This file will become your README and also the index of your documentation.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>pip install your_project_name</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Usage">Usage<a class="anchor-link" href="#Usage"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>very simple usage, 
init the search object then call sortedSearch()</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">cloudsearch.cloudsearch</span> <span class="kn">import</span> <span class="n">Search</span>
<span class="n">searchEndpoint</span> <span class="o">=</span> <span class="s1">&#39;https://search-villa-cloudsearch-2-4izacsoytzqf6kztcyjhssy2ti.ap-southeast-1.cloudsearch.amazonaws.com&#39;</span>
<span class="n">searcher</span> <span class="o">=</span> <span class="n">Search</span><span class="p">(</span><span class="n">searchTerm</span> <span class="o">=</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">USER</span><span class="p">,</span> <span class="n">pw</span><span class="o">=</span> <span class="n">PW</span> <span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">searchEndpoint</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">searcher</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">result</span><span class="p">))</span><span class="si">}</span><span class="s1"> results, the first item is </span><span class="se">\n</span><span class="si">{</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">result</span><span class="p">))</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>found 464 results, the first item is 
{&#39;pr_country_en&#39;: &#39;Thailand&#39;, &#39;pr_abb&#39;: &#39;BANANA&#39;, &#39;pr_engname&#39;: &#39;BANANA&#39;, &#39;pr_name&#39;: &#39;BANANA&#39;, &#39;pr_online_name_en&#39;: &#39;BANANA&#39;, &#39;pr_keyword_en&#39;: &#39;banana,bananas,Cavendish Banana,Cavendish,,Fresh fruit&#39;, &#39;pr_online_name_th&#39;: &#39;BANANA&#39;, &#39;cprcode&#39;: &#39;0226238&#39;, &#39;villa_category_l2_en&#39;: &#39;Fresh Produce&#39;, &#39;content_en&#39;: &#39;0226238 BANANA banana,bananas,Cavendish Banana,Cavendish,,Fresh fruit&#39;, &#39;pr_name_th&#39;: &#39;BANANA&#39;, &#39;iprcode&#39;: &#39;0226238&#39;, &#39;oprcode&#39;: &#39;0226238&#39;, &#39;villa_category_l3_en&#39;: &#39;Fruits &amp; Vegetable Local&#39;, &#39;hema_name_en&#39;: &#39;BANANA&#39;, &#39;pr_keyword_th&#39;: &#39;กล้วย,กล้วยหอม,กล้วยไข่,กล้วยออร์แกนิก,กล้วออร์แกนิค,Fresh fruit&#39;, &#39;hema_name_th&#39;: &#39;BANANA&#39;, &#39;pr_name_en&#39;: &#39;BANANA&#39;, &#39;pr_code&#39;: &#39;0226238&#39;, &#39;villa_category_l4_en&#39;: &#39;Local Fruit&#39;, &#39;content_th&#39;: &#39;BANANA กล้วย,กล้วยหอม,กล้วยไข่,กล้วยออร์แกนิก,กล้วออร์แกนิค,Fresh fruit&#39;, &#39;pr_active&#39;: &#39;Y&#39;, &#39;villa_category_l1_en&#39;: &#39;Fresh&#39;}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="For-a-more-complex-requirement">For a more complex requirement<a class="anchor-link" href="#For-a-more-complex-requirement"> </a></h2><p>You can extend the class, please have a look at sortedSearch example</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">_</span> <span class="o">=</span> <span class="n">searcher</span><span class="o">.</span><span class="n">sortedSearch</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>raw search result is     villa_category_l1_en villa_category_l2_en      villa_category_l3_en  \
0                  Fresh        Fresh Produce  Fruits &amp; Vegetable Local   
1                    NaN                  NaN                       NaN   
2                  Fresh        Fresh Produce                    Bakery   
3                  Fresh        Fresh Produce                    Bakery   
4                  Fresh        Fresh Produce                    Bakery   
..                   ...                  ...                       ...   
459                Fresh        Seafood Fresh                Crustacean   
460                Fresh        Seafood Fresh                Crustacean   
461                Fresh        Seafood Fresh             Local Seafood   
462                Fresh               Frozen                   Seafood   
463                Fresh        Seafood Fresh             Local Seafood   

    villa_category_l4_en  
0            Local Fruit  
1                    NaN  
2          Cake category  
3          Cake category  
4         Pasty category  
..                   ...  
459                Local  
460                Local  
461                  NaN  
462                  NaN  
463                  NaN  

[464 rows x 4 columns]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">boostDict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;fields&quot;</span><span class="p">:[</span><span class="s2">&quot;online_category_l1_en&quot;</span><span class="p">]</span>
<span class="p">}</span>
<span class="n">queryOptions</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">boostDict</span><span class="p">)</span>
<span class="n">searcher2</span> <span class="o">=</span> <span class="n">Search</span><span class="p">(</span><span class="n">searchTerm</span> <span class="o">=</span> <span class="s1">&#39;dairy&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">USER</span><span class="p">,</span> <span class="n">pw</span><span class="o">=</span> <span class="n">PW</span> <span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">searchEndpoint</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">searcher2</span><span class="o">.</span><span class="n">sortedSearch</span><span class="p">(</span><span class="n">queryOptions</span> <span class="o">=</span> <span class="n">queryOptions</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>raw search result is   villa_category_l1_en villa_category_l2_en villa_category_l3_en  \
0                Fresh                Dairy     Chilled Beverage   
1                Fresh                Dairy                 Milk   
2                Fresh                Dairy               Cheese   
3                Fresh                Dairy     Chilled Beverage   
4                Fresh                Dairy                 Milk   
5                  NaN                  NaN                  NaN   
6                  NaN                  NaN                  NaN   
7                Fresh                Dairy               Cheese   
8                Fresh                Dairy               Yogurt   
9                Fresh                Dairy               Yogurt   

  villa_category_l4_en  
0                  NaN  
1                  NaN  
2       Cheddar Cheese  
3                  NaN  
4                  NaN  
5                  NaN  
6                  NaN  
7                  NaN  
8               Yogurt  
9        YogurtGranola  
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">filterQuery</span> <span class="o">=</span> <span class="s2">&quot;(or &quot;</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;online_category_l1_en&#39;</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;:&#39;</span><span class="si">{</span><span class="n">cat</span><span class="si">}</span><span class="s2">&#39;&quot;</span> <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Dairy&#39;</span><span class="p">]])</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
<span class="n">searcher3</span> <span class="o">=</span> <span class="n">Search</span><span class="p">(</span><span class="n">searchTerm</span> <span class="o">=</span> <span class="s1">&#39;dairy&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">USER</span><span class="p">,</span> <span class="n">pw</span><span class="o">=</span> <span class="n">PW</span> <span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">searchEndpoint</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">searcher3</span><span class="o">.</span><span class="n">sortedSearch</span><span class="p">(</span><span class="n">filterQuery</span> <span class="o">=</span> <span class="n">filterQuery</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>raw search result is   villa_category_l1_en villa_category_l2_en villa_category_l3_en  \
0                  NaN                  NaN                  NaN   
1                Fresh                Dairy                 Milk   
2                Fresh                Dairy                Cream   
3                Fresh                Dairy                Cream   
4                Fresh                Dairy               Yogurt   
5                Fresh                Dairy               Yogurt   
6                Fresh                Dairy               Yogurt   
7                Fresh                Dairy               Yogurt   
8                Fresh                Dairy               Yogurt   
9                Fresh                Dairy               Yogurt   

   villa_category_l4_en  
0                   NaN  
1                   NaN  
2                   NaN  
3                   NaN  
4                   NaN  
5                   NaN  
6                   NaN  
7                   NaN  
8                   NaN  
9                   NaN  
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span><span class="p">[</span><span class="mi">9</span><span class="p">][</span><span class="s1">&#39;online_category_l1_en&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;Dairy&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

